# –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä StarRocks vs ClickHouse
–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –æ–±—â—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –Ω–∞ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É (OLAP) –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ column-oriented —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ClickHouse –∏ StarRocks —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –≤ –ø–æ–¥—Ö–æ–¥–∞—Ö –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∏—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ —ç—Ç–∏—Ö —Ä–∞–∑–ª–∏—á–∏—è—Ö.

### üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

| –ê—Å–ø–µ–∫—Ç | ClickHouse | StarRocks |
| :--- | :--- | :--- |
| **–û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π column-oriented DBMS** —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞ –æ–¥–Ω–æ–º —É–∑–ª–µ. | **–ú–∞—Å—Å–æ–≤–æ-–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (MPP)** —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Ä–æ–ª–µ–π —É–∑–ª–æ–≤. |
| **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** | –û–¥–Ω–æ—Ä–æ–¥–Ω—ã–µ —É–∑–ª—ã (shards). –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ **ClickHouse Keeper** (–Ω–∞ –±–∞–∑–µ Raft). | **Frontend (FE)**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤.<br>**Backend (BE)**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤. |
| **–î–≤–∏–∂–æ–∫ —Ç–∞–±–ª–∏—Ü** | **`MergeTree`** (–∏ –µ–≥–æ –≤–∞—Ä–∏–∞—Ü–∏–∏). –î–∞–Ω–Ω—ã–µ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É –∏ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ "–≥—Ä–∞–Ω—É–ª—ã". | **–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π columnar engine**. –î–∞–Ω–Ω—ã–µ –¥–µ–ª—è—Ç—Å—è –Ω–∞ **–ø–∞—Ä—Ç–∏—Ü–∏–∏** –∏ **–±–∞–∫–µ—Ç—ã (tablets)**. |
| **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è** | **–†–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–π (Sparse) –ø–µ—Ä–≤–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≥—Ä–∞–Ω—É–ª. **Data skipping –∏–Ω–¥–µ–∫—Å—ã** (min-max, bloom). | **–ü–µ—Ä–≤–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å** (–ø—Ä–µ—Ñ–∏–∫—Å–Ω—ã–π) –∏ **–≤—Ç–æ—Ä–∏—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã**. **Cost-Based Optimizer (CBO)** –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–ª–∞–Ω–∞. |
| **–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö** | **–ü–ª–æ—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã (Flat tables)**. JOIN –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Å–∏–ª—å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π. | **–ó–≤–µ–∑–¥–∞/—Å–Ω–µ–∂–∏–Ω–∫–∞ (Star/Snowflake Schema)**. –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –≤ JOIN. |
| **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö** | **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º—É—Ç–∞—Ü–∏–∏ (MUTATION)**, `ReplacingMergeTree`. –¢—è–∂–µ–ª—ã–µ –¥–ª—è —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π. | **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ UPSERT**, "delete and insert" —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞. |

### üí™ –°–∏–ª—å–Ω—ã–µ –∏ —Å–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

**ClickHouse**

*   **–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
    *   **–ù–µ–ø—Ä–µ–≤–∑–æ–π–¥–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å** –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–π –∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –ø–æ –æ–¥–Ω–æ–º—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å—Ç–æ–ª–±—Ü–∞–º.
    *   **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Å–∂–∞—Ç–∏–µ** –¥–∞–Ω–Ω—ã—Ö –±–ª–∞–≥–æ–¥–∞—Ä—è column-oriented –ø–æ–¥—Ö–æ–¥—É.
    *   **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ** –±–æ–ª—å—à–∏–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏.
    *   –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **–ø–ª–æ—Å–∫–∏—Ö –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü**.

*   **–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
    *   **–ù–∏–∑–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (QPS)**, –æ–±—ã—á–Ω–æ –º–µ–Ω–µ–µ 100.
    *   **–°–ª–∞–±—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ JOIN**, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–≤–µ–∑–¥–æ–æ–±—Ä–∞–∑–Ω—ã—Ö —Å—Ö–µ–º.
    *   **–°–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å —á–∞—Å—Ç—ã–º–∏ —Ç–æ—á–µ—á–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏** –¥–∞–Ω–Ω—ã—Ö.
    *   –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ **Cost-Based Optimizer (CBO)**.

**StarRocks**

*   **–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
    *   **–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å JOIN** –¥–ª—è –∑–≤–µ–∑–¥–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –∏ —Å–Ω–µ–∂–∏–Ω—á–∞—Ç—ã—Ö —Å—Ö–µ–º.
    *   **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—ã—Å–æ–∫–æ–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫** (—Ç—ã—Å—è—á–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É).
    *   **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (UPSERT)**.
    *   **–ù–∞–ª–∏—á–∏–µ CBO** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

*   **–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
    *   –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (FE/BE).
    *   –ú–æ–∂–µ—Ç —É—Å—Ç—É–ø–∞—Ç—å ClickHouse –≤ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ—Å—Ç—ã—Ö –∞–≥—Ä–µ–≥–∞—Ü–∏–π –Ω–∞–¥ "–ø–ª–æ—Å–∫–∏–º–∏" —Ç–∞–±–ª–∏—Ü–∞–º–∏.

### üéØ –û–±–ª–∞—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

**ClickHouse –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è:**
*   **–ê–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π (event streaming analytics).
*   **–û–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–æ–≤ –∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏**.
*   **–û–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤**, –≥–¥–µ –∑–∞–ø—Ä–æ—Å—ã –∑–∞—Ä–∞–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω—ã –∏ –¥–∞–Ω–Ω—ã–µ –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã.
*   –°—Ü–µ–Ω–∞—Ä–∏–µ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö **–≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –≤—Å—Ç–∞–≤–∫–∏** –±–æ–ª—å—à–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

**StarRocks —Å–∏–ª—å–Ω–µ–µ –≤:**
*   **–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â –¥–∞–Ω–Ω—ã—Ö (Data Warehouse)** —Å–æ —Å–ª–æ–∂–Ω—ã–º–∏ —Å—Ö–µ–º–∞–º–∏ "–∑–≤–µ–∑–¥–∞"/"—Å–Ω–µ–∂–∏–Ω–∫–∞".
*   **–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (BI) –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞** —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ ad-hoc –∑–∞–ø—Ä–æ—Å–∞–º–∏.
*   **–ú–Ω–æ–≥–æ—Ç–∞–±–ª–∏—á–Ω—ã—Ö JOIN-–∑–∞–ø—Ä–æ—Å–æ–≤** –≤—ã—Å–æ–∫–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏.
*   –°—Ü–µ–Ω–∞—Ä–∏–µ–≤, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ **—á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤).

### üíé –†–µ–∑—é–º–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

*   **–í—ã–±–∏—Ä–∞–π—Ç–µ ClickHouse**, –µ—Å–ª–∏ –≤–∞—à–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äì –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–≥—Ä–æ–º–Ω—ã—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ **–ø–ª–æ—Å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü**, –∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ–≤–µ–ª–∏–∫–æ.

*   **–í—ã–±–∏—Ä–∞–π—Ç–µ StarRocks**, –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–∞ **—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –°–£–ë–î**, –∫–æ—Ç–æ—Ä–∞—è —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ **–∑–≤–µ–∑–¥–æ–æ–±—Ä–∞–∑–Ω—ã–º–∏ —Å—Ö–µ–º–∞–º–∏**, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–≤—ã—Å–æ–∫—É—é –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—é** –∏ —Ç—Ä–µ–±—É–µ—Ç —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö. –ï–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–æ–ª—å—à–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –Ω—É–∂–¥—ã Data Warehouse.

–ù–∞–¥–µ—é—Å—å, —ç—Ç–æ—Ç –∞–Ω–∞–ª–∏–∑ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø—Ä–∏–Ω—è—Ç—å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–∞–±–æ—á–µ–π –Ω–∞–≥—Ä—É–∑–∫–µ, –º–æ–∂–Ω–æ –æ–±—Å—É–¥–∏—Ç—å –∏—Ö –ø—Ä–∏–º–µ–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ –∫–∞–∂–¥–æ–º—É —Ä–µ—à–µ–Ω–∏—é.
