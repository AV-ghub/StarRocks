# –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä StarRocks vs ClickHouse
## –û–±—â–µ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –æ–±—â—É—é –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –Ω–∞ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É (OLAP) –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ column-oriented —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ClickHouse –∏ StarRocks —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –≤ –ø–æ–¥—Ö–æ–¥–∞—Ö –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∏—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ —ç—Ç–∏—Ö —Ä–∞–∑–ª–∏—á–∏—è—Ö.

### üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

| –ê—Å–ø–µ–∫—Ç | ClickHouse | StarRocks |
| :--- | :--- | :--- |
| **–û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π column-oriented DBMS** —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞ –æ–¥–Ω–æ–º —É–∑–ª–µ. | **–ú–∞—Å—Å–æ–≤–æ-–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (MPP)** —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Ä–æ–ª–µ–π —É–∑–ª–æ–≤. |
| **–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** | –û–¥–Ω–æ—Ä–æ–¥–Ω—ã–µ —É–∑–ª—ã (shards). –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ **ClickHouse Keeper** (–Ω–∞ –±–∞–∑–µ Raft). | **Frontend (FE)**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤.<br>**Backend (BE)**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤. |
| **–î–≤–∏–∂–æ–∫ —Ç–∞–±–ª–∏—Ü** | **`MergeTree`** (–∏ –µ–≥–æ –≤–∞—Ä–∏–∞—Ü–∏–∏). –î–∞–Ω–Ω—ã–µ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É –∏ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ "–≥—Ä–∞–Ω—É–ª—ã". | **–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π columnar engine**. –î–∞–Ω–Ω—ã–µ –¥–µ–ª—è—Ç—Å—è –Ω–∞ **–ø–∞—Ä—Ç–∏—Ü–∏–∏** –∏ **–±–∞–∫–µ—Ç—ã (tablets)**. |
| **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è** | **–†–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–π (Sparse) –ø–µ—Ä–≤–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≥—Ä–∞–Ω—É–ª. **Data skipping –∏–Ω–¥–µ–∫—Å—ã** (min-max, bloom). | **–ü–µ—Ä–≤–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å** (–ø—Ä–µ—Ñ–∏–∫—Å–Ω—ã–π) –∏ **–≤—Ç–æ—Ä–∏—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã**. **Cost-Based Optimizer (CBO)** –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–ª–∞–Ω–∞. |
| **–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö** | **–ü–ª–æ—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã (Flat tables)**. JOIN –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Å–∏–ª—å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π. | **–ó–≤–µ–∑–¥–∞/—Å–Ω–µ–∂–∏–Ω–∫–∞ (Star/Snowflake Schema)**. –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –≤ JOIN. |
| **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö** | **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º—É—Ç–∞—Ü–∏–∏ (MUTATION)**, `ReplacingMergeTree`. –¢—è–∂–µ–ª—ã–µ –¥–ª—è —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π. | **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ UPSERT**, "delete and insert" —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞. |

### üí™ –°–∏–ª—å–Ω—ã–µ –∏ —Å–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

**ClickHouse**

*   **–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
    *   **–ù–µ–ø—Ä–µ–≤–∑–æ–π–¥–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å** –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–π –∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö –ø–æ –æ–¥–Ω–æ–º—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å—Ç–æ–ª–±—Ü–∞–º.
    *   **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Å–∂–∞—Ç–∏–µ** –¥–∞–Ω–Ω—ã—Ö –±–ª–∞–≥–æ–¥–∞—Ä—è column-oriented –ø–æ–¥—Ö–æ–¥—É.
    *   **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ** –±–æ–ª—å—à–∏–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏.
    *   –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **–ø–ª–æ—Å–∫–∏—Ö –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü**.

*   **–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
    *   **–ù–∏–∑–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (QPS)**, –æ–±—ã—á–Ω–æ –º–µ–Ω–µ–µ 100.
    *   **–°–ª–∞–±—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ JOIN**, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–≤–µ–∑–¥–æ–æ–±—Ä–∞–∑–Ω—ã—Ö —Å—Ö–µ–º.
    *   **–°–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å —á–∞—Å—Ç—ã–º–∏ —Ç–æ—á–µ—á–Ω—ã–º–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏** –¥–∞–Ω–Ω—ã—Ö.
    *   –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ **Cost-Based Optimizer (CBO)**.

**StarRocks**

*   **–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
    *   **–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å JOIN** –¥–ª—è –∑–≤–µ–∑–¥–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –∏ —Å–Ω–µ–∂–∏–Ω—á–∞—Ç—ã—Ö —Å—Ö–µ–º.
    *   **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—ã—Å–æ–∫–æ–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫** (—Ç—ã—Å—è—á–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É).
    *   **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (UPSERT)**.
    *   **–ù–∞–ª–∏—á–∏–µ CBO** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

*   **–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
    *   –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (FE/BE).
    *   –ú–æ–∂–µ—Ç —É—Å—Ç—É–ø–∞—Ç—å ClickHouse –≤ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ—Å—Ç—ã—Ö –∞–≥—Ä–µ–≥–∞—Ü–∏–π –Ω–∞–¥ "–ø–ª–æ—Å–∫–∏–º–∏" —Ç–∞–±–ª–∏—Ü–∞–º–∏.

### üéØ –û–±–ª–∞—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

**ClickHouse –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è:**
*   **–ê–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—ã—Ç–∏–π (event streaming analytics).
*   **–û–±—Ä–∞–±–æ—Ç–∫–∏ –ª–æ–≥–æ–≤ –∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏**.
*   **–û–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤**, –≥–¥–µ –∑–∞–ø—Ä–æ—Å—ã –∑–∞—Ä–∞–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω—ã –∏ –¥–∞–Ω–Ω—ã–µ –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã.
*   –°—Ü–µ–Ω–∞—Ä–∏–µ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö **–≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –≤—Å—Ç–∞–≤–∫–∏** –±–æ–ª—å—à–∏—Ö –ø–∞–∫–µ—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

**StarRocks —Å–∏–ª—å–Ω–µ–µ –≤:**
*   **–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â –¥–∞–Ω–Ω—ã—Ö (Data Warehouse)** —Å–æ —Å–ª–æ–∂–Ω—ã–º–∏ —Å—Ö–µ–º–∞–º–∏ "–∑–≤–µ–∑–¥–∞"/"—Å–Ω–µ–∂–∏–Ω–∫–∞".
*   **–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (BI) –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞** —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ ad-hoc –∑–∞–ø—Ä–æ—Å–∞–º–∏.
*   **–ú–Ω–æ–≥–æ—Ç–∞–±–ª–∏—á–Ω—ã—Ö JOIN-–∑–∞–ø—Ä–æ—Å–æ–≤** –≤—ã—Å–æ–∫–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏.
*   –°—Ü–µ–Ω–∞—Ä–∏–µ–≤, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ **—á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤).

### üíé –†–µ–∑—é–º–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

*   **–í—ã–±–∏—Ä–∞–π—Ç–µ ClickHouse**, –µ—Å–ª–∏ –≤–∞—à–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äì –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–≥—Ä–æ–º–Ω—ã—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ **–ø–ª–æ—Å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü**, –∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ–≤–µ–ª–∏–∫–æ.

*   **–í—ã–±–∏—Ä–∞–π—Ç–µ StarRocks**, –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–∞ **—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –°–£–ë–î**, –∫–æ—Ç–æ—Ä–∞—è —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ **–∑–≤–µ–∑–¥–æ–æ–±—Ä–∞–∑–Ω—ã–º–∏ —Å—Ö–µ–º–∞–º–∏**, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–≤—ã—Å–æ–∫—É—é –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—é** –∏ —Ç—Ä–µ–±—É–µ—Ç —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥–∞–Ω–Ω—ã—Ö. –ï–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–æ–ª—å—à–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –Ω—É–∂–¥—ã Data Warehouse.

–ù–∞–¥–µ—é—Å—å, —ç—Ç–æ—Ç –∞–Ω–∞–ª–∏–∑ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø—Ä–∏–Ω—è—Ç—å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–∞–±–æ—á–µ–π –Ω–∞–≥—Ä—É–∑–∫–µ, –º–æ–∂–Ω–æ –æ–±—Å—É–¥–∏—Ç—å –∏—Ö –ø—Ä–∏–º–µ–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ –∫–∞–∂–¥–æ–º—É —Ä–µ—à–µ–Ω–∏—é.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ –ø—Ä–æ–∏–≥—Ä—ã—à–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ StarRocks
–ó–∞ —Å—á–µ—Ç –∫–∞–∫–∏—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ ClickHouse –≤—ã–∂–∏–º–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –≤ "–ø—Ä–æ–∏–≥—Ä—ã—à–Ω—ã—Ö" –¥–ª—è StarRocks —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö, —á—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã StarRocks.

### ‚öôÔ∏è –ú–µ—Ö–∞–Ω–∏–∑–º—ã ClickHouse, –¥–∞—é—â–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –≤ "–ø—Ä–æ—Å—Ç—ã—Ö" —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö

–≠—Ç–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–µ –≤—Å–µ–≥–¥–∞, –∞ –≤ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–ª—É—á–∞—è—Ö, –∏ —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π:

**1. –†–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å (Sparse Primary Index) –∏ –≥—Ä–∞–Ω—É–ª—ã –¥–æ—Å—Ç—É–ø–∞**

*   **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ ClickHouse:** –ü–µ—Ä–≤–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–ø–∏—Å—å –¥–ª—è –∫–∞–∂–¥–æ–π N-–æ–π —Å—Ç—Ä–æ–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–∂–¥—ã–µ 8192 —Å—Ç—Ä–æ–∫–∏ ‚Äî —ç—Ç–æ "–≥—Ä–∞–Ω—É–ª–∞"). –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å `WHERE` –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É, –∏–Ω–¥–µ–∫—Å –±—ã—Å—Ç—Ä–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç **–Ω–æ–º–µ—Ä–∞ –≥—Ä–∞–Ω—É–ª**, –∫–æ—Ç–æ—Ä—ã–µ *–º–æ–≥—É—Ç* —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∏—Å–∫–æ–º—ã–µ –¥–∞–Ω–Ω—ã–µ, –∞ –Ω–µ –≤—Å–µ —Å—Ç—Ä–æ–∫–∏.
*   **–í—ã–≥–æ–¥–∞:** –†–µ–∑–∫–æ —Å–æ–∫—Ä–∞—â–∞–µ—Ç—Å—è –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å –¥–∏—Å–∫–∞. –î–ª—è —à–∏—Ä–æ–∫–∏—Ö —Ç–∞–±–ª–∏—Ü —ç—Ç–æ –æ–≥—Ä–æ–º–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è I/O. ClickHouse —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ü–µ–ª—ã–º–∏ –≥—Ä–∞–Ω—É–ª–∞–º–∏, —á—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ –ª–æ–∂–∏—Ç—Å—è –Ω–∞ column-oriented —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

**2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Cost-Based Optimizer (CBO) –∫–∞–∫ "—Ñ–∏—á–∞"**

*   **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ ClickHouse:** –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π. –î–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–π –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å—Ç–æ–ª–±—Ü–∞–º –æ–Ω –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä—è–º–æ–π –ø—É—Ç—å: `–ß—Ç–µ–Ω–∏–µ —Å –¥–∏—Å–∫–∞ -> –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è -> –ê–≥—Ä–µ–≥–∞—Ü–∏—è`.
*   **–í—ã–≥–æ–¥–∞:** **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤** –Ω–∞ —Å–∞–º –ø—Ä–æ—Ü–µ—Å—Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏. CBO –≤ StarRocks ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π, –Ω–æ —Ç—è–∂–µ–ª—ã–π –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω —Å–æ–±–∏—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, —Å—Ç—Ä–æ–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–ª–∞–Ω–æ–≤ –∏ –≤—ã–±–∏—Ä–∞—Ç—å –ª—É—á—à–∏–π. –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —ç—Ç–∞ —Ä–∞–±–æ—Ç–∞ –∏–∑–±—ã—Ç–æ—á–Ω–∞, –∏ –µ–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–∞–º–µ—Ç–Ω–æ–π.

**3. Data Skipping –ò–Ω–¥–µ–∫—Å—ã (min/max, set, bloom_filter, etc.)**

*   **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ ClickHouse:** –≠—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç –º–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –∫—É—Å–∫–æ–≤ (—á–∞—Å—Ç–µ–π —Ç–∞–±–ª–∏—Ü—ã). –ù–∞–ø—Ä–∏–º–µ—Ä, `minmax` –∏–Ω–¥–µ–∫—Å –¥–ª—è —Å—Ç–æ–ª–±—Ü–∞ —Å –¥–∞—Ç–∞–º–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–∑—É –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Ü–µ–ª—ã–π –∫—É—Å–æ–∫, –µ—Å–ª–∏ –∏—Å–∫–æ–º–∞—è –¥–∞—Ç–∞ –≤ –Ω–µ–≥–æ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç.
*   **–í—ã–≥–æ–¥–∞:** –ï—â–µ –±–æ–ª—å—à–µ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ I/O –Ω–∞ —ç—Ç–∞–ø–µ *–¥–æ* —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å –¥–∏—Å–∫–∞. –≠—Ç–∏ –∏–Ω–¥–µ–∫—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –ø–∞—Ä–µ —Å —Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º –∏ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º, —Å–æ–∑–¥–∞–≤–∞—è –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä.

**4. –õ–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ Pre-Sorting**

*   **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ ClickHouse:** –î–∞–Ω–Ω—ã–µ –≤ –∫–∞–∂–¥–æ–º –∫—É—Å–∫–µ (`part`) —Ñ–∏–∑–∏—á–µ—Å–∫–∏ **–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã** –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–±—ã—Ç–∏—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞ –¥–µ–Ω—å) –ª–µ–∂–∞—Ç —Ä—è–¥–æ–º –Ω–∞ –¥–∏—Å–∫–µ.
*   **–í—ã–≥–æ–¥–∞:** –ü—Ä–∏ —á—Ç–µ–Ω–∏–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–π, –¥–∏—Å–∫–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏**, –∞ –Ω–µ —Å–ª—É—á–∞–π–Ω—ã–º–∏. –≠—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã –¥–ª—è HDD/SSD. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.

**5. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–≤–∏–∂–∫–∏ —Ç–∞–±–ª–∏—Ü (`SummingMergeTree`, `AggregatingMergeTree`)**

*   **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ ClickHouse:** –≠—Ç–∏ –¥–≤–∏–∂–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç "–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å" –¥–∞–Ω–Ω—ã–µ –Ω–∞ –ª–µ—Ç—É –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, `SummingMergeTree` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—É–º–º–∏—Ä—É–µ—Ç —á–∏—Å–ª–æ–≤—ã–µ —Å—Ç–æ–ª–±—Ü—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∫–ª—é—á–æ–º.
*   **–í—ã–≥–æ–¥–∞:** –î–ª—è –¥–∞—à–±–æ—Ä–¥–æ–≤, –≥–¥–µ –Ω—É–∂–Ω—ã –∏—Ç–æ–≥–∏, –∑–∞–ø—Ä–æ—Å –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –∏–∑ —Ç—è–∂–µ–ª–æ–π –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –≤ –±—ã—Å—Ç—Ä–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∂–µ –ø–æ—á—Ç–∏ –≥–æ—Ç–æ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

**–ò—Ç–æ–≥ –ø–æ ClickHouse:** –ï–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Äî —ç—Ç–æ **–ø—É–ª–µ–º–µ—Ç –¥–ª—è –∑–∞—Ä–∞–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**. –û–Ω –∂–µ—Ä—Ç–≤—É–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å—é (—Å–ª–æ–∂–Ω—ã–µ JOIN, ad-hoc –∑–∞–ø—Ä–æ—Å—ã) –≤ –ø–æ–ª—å–∑—É raw speed –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞: "—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–ª—é—á—É -> –∞–≥—Ä–µ–≥–∞—Ü–∏—è".

---

### üõ†Ô∏è –ö–∞–∫ –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å "–ø—Ä–æ–≤–∞–ª" –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ StarRocks?

–î–∞, —ç—Ç–æ—Ç —Ä–∞–∑—Ä—ã–≤ –º–æ–∂–Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –∏–ª–∏ –¥–∞–∂–µ –Ω–∏–≤–µ–ª–∏—Ä–æ–≤–∞—Ç—å. –í–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã:

**1. –¢—â–∞—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –±–∞–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Bucketing)**

*   **–ß—Ç–æ —ç—Ç–æ:** –í StarRocks –∞–Ω–∞–ª–æ–≥ "—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É" ‚Äî —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `PARTITION BY` (–∫—Ä—É–ø–Ω—ã–µ –±–ª–æ–∫–∏, –æ–±—ã—á–Ω–æ –ø–æ –¥–∞—Ç–µ) –∏ `DISTRIBUTED BY HASH` (–∫–æ—Ç–æ—Ä–æ–µ —Ç–∞–∫–∂–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç **–±–∞–∫–µ—Ç—ã/—Ç–∞–±–ª–µ—Ç—ã**). –ö–ª—é—á–µ–≤—ã–µ —Å—Ç–æ–ª–±—Ü—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ JOIN –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–µ—Ä–≤—ã–º–∏ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.
*   **–ö–∞–∫ –ø–æ–º–æ–≥–∞–µ—Ç:** –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ç—É —Å–∞–º—É—é **–ª–æ–∫–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**, —á—Ç–æ –µ—Å—Ç—å –≤ ClickHouse. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –±–∞–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å `WHERE` –∏ `JOIN` —Å –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–µ–π –ø–µ—Ä–µ—Å—ã–ª–∫–∏ –¥–∞–Ω–Ω—ã—Ö (shuffle) –º–µ–∂–¥—É —É–∑–ª–∞–º–∏.

**2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤**

*   **–ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á (Primary Key):** –í StarRocks —ç—Ç–æ *–ø–ª–æ—Ç–Ω—ã–π* –∏–Ω–¥–µ–∫—Å, –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç —Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω–æ–≥–æ –≤ ClickHouse. –û–Ω —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –¥–ª—è —Ç–æ—á–µ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (`SELECT ... WHERE id = 123`).
*   **–£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å (Sort Key / Prefix Index):** –î–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —Ç–∞–±–ª–µ—Ç–æ–≤ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ —ç—Ç–æ–º—É –∫–ª—é—á—É. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∏ —á–∞—Å—Ç—ã–µ —É—Å–ª–æ–≤–∏—è `WHERE` –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–µ—Ñ–∏–∫—Å—ã —ç—Ç–æ–≥–æ –∫–ª—é—á–∞.
*   **Bitmap –∏ Bloom Filter –∏–Ω–¥–µ–∫—Å—ã:** StarRocks —Ç–æ–∂–µ –∏—Ö –∏–º–µ–µ—Ç! –°–æ–∑–¥–∞–≤–∞–π—Ç–µ `BITMAP INDEX` –Ω–∞ —Å—Ç–æ–ª–±—Ü–∞—Ö —Å –Ω–∏–∑–∫–æ–π –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `status`), –∞ `Bloom Filter` ‚Äî –Ω–∞ —Å—Ç–æ–ª–±—Ü–∞—Ö —Å –≤—ã—Å–æ–∫–æ–π –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `user_id`), –≥–¥–µ —á–∞—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è. –≠—Ç–æ –µ–≥–æ –ø—Ä—è–º–æ–π –∞–Ω–∞–ª–æ–≥ Data Skipping –∏–Ω–¥–µ–∫—Å–æ–≤ –∏–∑ ClickHouse.

**3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (Materialized Views)**

*   **Materialized Views (–ú–í):** –≠—Ç–æ —Å–∞–º—ã–π –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç. –ï—Å–ª–∏ –≤ ClickHouse –µ—Å—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è —á–µ—Ä–µ–∑ –¥–≤–∏–∂–∫–∏, —Ç–æ –≤ StarRocks –≤—ã –¥–æ—Å—Ç–∏–≥–∞–µ—Ç–µ —ç—Ç–æ–≥–æ —á–µ—Ä–µ–∑ –ú–í.
    *   –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ú–í, –∫–æ—Ç–æ—Ä–∞—è –∑–∞—Ä–∞–Ω–µ–µ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –¥–Ω—è–º –∏ –∫–ª—é—á–µ–≤—ã–º –∏–∑–º–µ—Ä–µ–Ω–∏—è–º.
    *   –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä StarRocks —É–º–µ–µ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –ú–í, –¥–∞–∂–µ –µ—Å–ª–∏ –≤ –∑–∞–ø—Ä–æ—Å–µ –æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω. –≠—Ç–æ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ —Å `SummingMergeTree`.

**4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º**

*   **Page Cache:** StarRocks –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à —Å—Ç—Ä–∞–Ω–∏—Ü –¥–∞–Ω–Ω—ã—Ö. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ —Ä–∞–∑–º–µ—Ä –∞–¥–µ–∫–≤–∞—Ç–Ω–æ –≤–∞—à–µ–π —Ä–∞–±–æ—á–µ–π –ø–∞–º—è—Ç–∏. –î–ª—è "–≥–æ—Ä—è—á–∏—Ö" –¥–∞–Ω–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Å –æ–≥—Ä–æ–º–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é –ø—Ä—è–º–æ –∏–∑ –ø–∞–º—è—Ç–∏.
*   **Query Cache:** –ö—ç—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (–∏–ª–∏ –∏—Ö —á–∞—Å—Ç–µ–π). –î–ª—è —á–∞—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∞–≥—Ä–µ–≥–∞—Ü–∏–π —ç—Ç–æ –¥–∞–µ—Ç –æ—Ç–≤–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.

### üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥

*   **–ï—Å–ª–∏ –≤–∞—à–∞ –Ω–∞–≥—Ä—É–∑–∫–∞** ‚Äî —ç—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –Ω–∞–±–æ—Ä –∑–∞—Ä–∞–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö "—Ç—è–∂–µ–ª—ã—Ö" –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ, –∏ –≤—ã –≥–æ—Ç–æ–≤—å—Ç–µ —Å—Ö–µ–º—É –ø–æ–¥ –Ω–∏—Ö, **—Å—ã—Ä–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å ClickHouse –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º–∞** –¥–ª—è StarRocks.
*   **–û–¥–Ω–∞–∫–æ, –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ** —ç—Ç–æ—Ç —Ä–∞–∑—Ä—ã–≤ —á–∞—Å—Ç–æ –Ω–µ–∑–∞–º–µ—Ç–µ–Ω. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ ‚Äî –Ω–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞. StarRocks, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π (–ø–∞—Ä—Ç–∏—Ü–∏–∏ + –±–∞–∫–µ—Ç—ã + –∏–Ω–¥–µ–∫—Å—ã + –ú–í), –ø–æ–∫–∞–∂–µ—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–∏–º—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è 90% —Å–ª—É—á–∞–µ–≤, –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–≤:
    *   –ì–æ—Ä–∞–∑–¥–æ –ª—É—á—à—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ JOIN.
    *   –í—ã—Å–æ–∫–∏–π QPS (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É).
    *   –£–¥–æ–±–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

–ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è ‚Äî —ç—Ç–æ –Ω–µ about "–¥–æ–≥–Ω–∞—Ç—å –∏ –ø–µ—Ä–µ–≥–Ω–∞—Ç—å", –∞ –æ —Ç–æ–º, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã StarRocks –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è **–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** –≤ –æ–±–º–µ–Ω –Ω–∞ **–Ω–µ—Å—Ä–∞–≤–Ω–µ–Ω–Ω–æ –±–æ–ª—å—à—É—é –≥–∏–±–∫–æ—Å—Ç—å –∏ —É–¥–æ–±—Å—Ç–≤–æ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏**.

## –†–∞–±–æ—Ç–∞ —Å –±–æ–ª—å—à–∏–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å ClickHouse —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ø–µ—Ç–∞–±–∞–π—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–æ –º–Ω–æ–≥–æ–º –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –µ–≥–æ **—Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–º –ø–µ—Ä–≤–∏—á–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º (Sparse Primary Index)**. –£ StarRocks –ø–æ–¥—Ö–æ–¥ –∫ —Ä–µ—à–µ–Ω–∏—é —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –∏–Ω–æ–π, –Ω–æ —Ç–∞–∫–∂–µ –æ—á–µ–Ω—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π.

–í–æ—Ç —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ —ç—Ç–æ–º—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –≤–æ–ø—Ä–æ—Å—É.

### ‚öôÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏

| –ê—Å–ø–µ–∫—Ç | **ClickHouse** | **StarRocks** |
| :--- | :--- | :--- |
| **–ö–ª—é—á–µ–≤–æ–π –º–µ—Ö–∞–Ω–∏–∑–º** | **–†–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–π (Sparse) –ø–µ—Ä–≤–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å** | **–ü–ª–æ—Ç–Ω—ã–π –ø–µ—Ä–≤–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å + –ü—Ä–µ—Ñ–∏–∫—Å–Ω—ã–π –∏–Ω–¥–µ–∫—Å + –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ –±–∞–∫–µ—Ç—ã (Bucketing)** |
| **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç** | –ò–Ω–¥–µ–∫—Å —Ö—Ä–∞–Ω–∏—Ç –∑–∞–ø–∏—Å—å –Ω–µ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏, –∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ **–≥—Ä–∞–Ω—É–ª–∞** (–±–ª–æ–∫–∞ –∏–∑ ~8192 —Å—Ç—Ä–æ–∫). –ó–∞–ø—Ä–æ—Å –Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω—ã–µ –≥—Ä–∞–Ω—É–ª—ã —á–µ—Ä–µ–∑ –±–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å —Ç–µ—Ä–∞–±–∞–π—Ç—ã –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. | –î–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —Ç–∞–±–ª–∏—Ü—ã –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω—ã –≤ **—Ç–∞–±–ª–µ—Ç—ã** —á–µ—Ä–µ–∑ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ö–µ—à—É (`DISTRIBUTED BY HASH`). –¢–∞–±–ª–µ—Ç—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –∫–ª—é—á—É, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –æ—Ç—Å–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (pruning) –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É —ç—Ç–æ–≥–æ –∫–ª—é—á–∞. |
| **–°—Ü–µ–Ω–∞—Ä–∏–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏** | –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –ø–æ **–ø–ª–æ—Å–∫–∏–º, –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º —Ç–∞–±–ª–∏—Ü–∞–º**, –≥–¥–µ –∑–∞–ø—Ä–æ—Å—ã —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–µ—Ñ–∏–∫—Å –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞. | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –≤ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö —Å–æ **–∑–≤–µ–∑–¥–æ–æ–±—Ä–∞–∑–Ω–æ–π —Å—Ö–µ–º–æ–π**, –≥–¥–µ –≤–∞–∂–Ω—ã –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω—ã–µ JOIN –∏ –≤—ã—Å–æ–∫–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã (Bitmap, Bloom Filter) –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏. |

### üéØ –û–±–ª–∞—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏ –∏—Ç–æ–≥–∏

–û–±–µ —Å–∏—Å—Ç–µ–º—ã —Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å –ø–µ—Ç–∞–±–∞–π—Ç–Ω—ã–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:

- **ClickHouse** –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—ã—Å–æ—á–∞–π—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ç—Ä–æ–≤—ã–≤–∞—é—Ç—Å—è –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É, –∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏–∏. –ï–≥–æ —Ä–∞–∑—Ä–µ–∂–µ–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç "–ø–µ—Ä–µ–ø—Ä—ã–≥–∏–≤–∞—Ç—å" —á–µ—Ä–µ–∑ –æ–≥—Ä–æ–º–Ω—ã–µ –æ–±—ä–µ–º—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫–µ.

- **StarRocks** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (—à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ç–∞–±–ª–µ—Ç—ã) –∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–∏—Ö. –≠—Ç–æ, –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å –º–æ—â–Ω—ã–º Cost-Based Optimizer (CBO), –¥–µ–ª–∞–µ—Ç –µ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫, –æ—Å–æ–±–µ–Ω–Ω–æ —Ç–µ—Ö, —á—Ç–æ involve –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ JOIN –∏ –≤—ã—Å–æ–∫—É—é –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É.

# –ò—Ç–æ–≥–∏

StarRocks –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è **–º–∞—Å—Å–æ–≤–æ-–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∞ (MPP) —Å–ª–æ–∂–Ω—ã—Ö (–∏ —Å–∏–ª—å–Ω–æ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö, –Ω–µ —Ç–∏–ø–æ–≤—ã—Ö) –∑–∞–ø—Ä–æ—Å–æ–≤**.  

–£ –Ω–µ–≥–æ **—Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π columnar engine**, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ –¥–µ–ª—è—Ç—Å—è –Ω–∞ –ø–∞—Ä—Ç–∏—Ü–∏–∏ –∏ –±–∞–∫–µ—Ç—ã (tablets).  

–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —É –Ω–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç [–Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö](https://docs.starrocks.io/docs/best_practices/table_clustering/#how-to-choose-an-effective-sort-key), –±–ª–∏–∑–∫–∏—Ö –∫ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º b-tree –ø–æ–¥—Ö–æ–¥–∞–º.  

* **–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã**:
   * –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è **–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å JOIN** –¥–ª—è –∑–≤–µ–∑–¥–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –∏ —Å–Ω–µ–∂–∏–Ω—á–∞—Ç—ã—Ö —Å—Ö–µ–º.
   * –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **–≤—ã—Å–æ–∫–æ–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫** (—Ç—ã—Å—è—á–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É).
   * –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ **–æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** –¥–∞–Ω–Ω—ã—Ö (UPSERT).
   * –ù–∞–ª–∏—á–∏–µ **CBO** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

_**–ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–∞–∫–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**_ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å WHERE –∏ JOIN —Å –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–µ–π –ø–µ—Ä–µ—Å—ã–ª–∫–∏ –¥–∞–Ω–Ω—ã—Ö (shuffle) –º–µ–∂–¥—É —É–∑–ª–∞–º–∏. 
–≠—Ç–æ _**–ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ—Å—Ç–∏—á—å —Ç–µ—Ö –∂–µ —Ü–µ–ª–µ–π, —á—Ç–æ –∏ —Ä–∞–∑—Ä—è–∂–µ–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å**_ –≤ –∫–ª–∏–∫–µ (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–≥—Ä–æ–º–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤, –±—ã—Å—Ç—Ä–æ–µ —á—Ç–µ–Ω–∏–µ –ø–ª–æ—Å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü).

–°–æ–∑–¥–∞–Ω–∏–µ _**BITMAP INDEX –Ω–∞ —Å—Ç–æ–ª–±—Ü–∞—Ö —Å –Ω–∏–∑–∫–æ–π –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é**_ (–Ω–∞–ø—Ä–∏–º–µ—Ä, status), –∞ _**Bloom Filter ‚Äî –Ω–∞ —Å—Ç–æ–ª–±—Ü–∞—Ö —Å –≤—ã—Å–æ–∫–æ–π –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é**_ (–Ω–∞–ø—Ä–∏–º–µ—Ä, user_id), –≥–¥–µ —á–∞—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è - —ç—Ç–æ –µ–≥–æ –ø—Ä—è–º–æ–π _**–∞–Ω–∞–ª–æ–≥ Data Skipping –∏–Ω–¥–µ–∫—Å–æ–≤**_ –∏–∑ ClickHouse.

* **Materialized Views** (–ú–í): –≠—Ç–æ —Å–∞–º—ã–π –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç. –ï—Å–ª–∏ –≤ ClickHouse –µ—Å—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è —á–µ—Ä–µ–∑ –¥–≤–∏–∂–∫–∏, —Ç–æ –≤ StarRocks –≤—ã –¥–æ—Å—Ç–∏–≥–∞–µ—Ç–µ —ç—Ç–æ–≥–æ —á–µ—Ä–µ–∑ –ú–í.
   * –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ú–í, –∫–æ—Ç–æ—Ä–∞—è –∑–∞—Ä–∞–Ω–µ–µ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –¥–Ω—è–º –∏ –∫–ª—é—á–µ–≤—ã–º –∏–∑–º–µ—Ä–µ–Ω–∏—è–º.
   * –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä StarRocks —É–º–µ–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –ú–í, –¥–∞–∂–µ –µ—Å–ª–∏ –≤ –∑–∞–ø—Ä–æ—Å–µ –æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω. –≠—Ç–æ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ —Å SummingMergeTree.
 
* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
  * **Page Cache**: StarRocks –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à —Å—Ç—Ä–∞–Ω–∏—Ü –¥–∞–Ω–Ω—ã—Ö. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ —Ä–∞–∑–º–µ—Ä –∞–¥–µ–∫–≤–∞—Ç–Ω–æ –≤–∞—à–µ–π —Ä–∞–±–æ—á–µ–π –ø–∞–º—è—Ç–∏. –î–ª—è "–≥–æ—Ä—è—á–∏—Ö" –¥–∞–Ω–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Å –æ–≥—Ä–æ–º–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é –ø—Ä—è–º–æ –∏–∑ –ø–∞–º—è—Ç–∏.
  * **Query Cache**: –ö—ç—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (–∏–ª–∏ –∏—Ö —á–∞—Å—Ç–µ–π). –î–ª—è —á–∞—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∞–≥—Ä–µ–≥–∞—Ü–∏–π —ç—Ç–æ –¥–∞–µ—Ç –æ—Ç–≤–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.

* –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ ‚Äî –Ω–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞. StarRocks, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π (–ø–∞—Ä—Ç–∏—Ü–∏–∏ + –±–∞–∫–µ—Ç—ã + –∏–Ω–¥–µ–∫—Å—ã + –ú–í), –ø–æ–∫–∞–∂–µ—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–∏–º—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –¥–ª—è 90% —Å–ª—É—á–∞–µ–≤, –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–≤:
   * –ì–æ—Ä–∞–∑–¥–æ **–ª—É—á—à—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤** –∏ JOIN.
   * **–í—ã—Å–æ–∫–∏–π QPS** (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É).
   * –£–¥–æ–±–Ω—ã–µ **–æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** –¥–∞–Ω–Ω—ã—Ö.

StarRocks –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (—à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ç–∞–±–ª–µ—Ç—ã) –∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–∏—Ö. 
–≠—Ç–æ, –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å –º–æ—â–Ω—ã–º Cost-Based Optimizer (CBO), **–¥–µ–ª–∞–µ—Ç –µ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫**, –æ—Å–æ–±–µ–Ω–Ω–æ —Ç–µ—Ö, —á—Ç–æ involve –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ JOIN –∏ –≤—ã—Å–æ–∫—É—é –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É.















