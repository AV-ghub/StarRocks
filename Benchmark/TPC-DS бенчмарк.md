# TPC-DS (Transaction Processing Performance Council - Decision Support)
Это стандартный отраслевой бенчмарк (тест производительности) для систем обработки данных, ориентированных на **аналитику и принятие решений (Decision Support Systems)**.

**TPC-DS SQL statements** — это набор сложных SQL-запросов, который имитирует типичную аналитическую нагрузку современного предприятия.

### Ключевые характеристики TPC-DS:

1.  **Реалистичная схема данных:**
    *   Моделирует данные крупного ритейлера (например, как Amazon или Walmart).
    *   Включает **денормализованные** (например, `store_sales`) и **нормализованные** таблицы (например, `customer`, `item`), что отражает реальные хранилища данных.

2.  **Сложные и разнообразные запросы:**
    *   Всего 99 запросов.
    *   Они покрывают широкий спектр аналитических сценариев:
        *   **Сложные JOIN** между многими таблицами
        *   **Агрегации** с `GROUP BY` и оконными функциями
        *   **Аналитические функции** (`RANK()`, `OVER()`)
        *   **Рекурсивные подзапросы**
        *   **Скалярные подзапросы**
    *   Это не примитивные `SELECT * FROM table`, а сложные аналитические отчеты, которые бизнес использует для принятия решений.

3.  **Тестирование оптимизатора запросов (CBO):**
    *   TPC-DS — это, по сути, тест не столько на скорость чтения с диска, сколько на **интеллект Cost-Based Optimizer (CBO)** системы.
    *   Система должна уметь выбрать оптимальный план выполнения для каждого из 99 разнообразных запросов.

### Почему TPC-DS так важен в контексте выбора OLAP-системы?

Когда вы видите, что какая-то система (например, **StarRocks** или **Doris**) позиционируется как "хорошо справляется с большими JOIN и сложными запросами", это почти всегда означает, что она показывает отличные результаты именно в **TPC-DS**.

**Пример запроса из TPC-DS (упрощенно):**
```sql
-- Query 3: Анализ продаж по каналам, с подзапросами и агрегацией
SELECT 
    dt.d_year,
    item.i_brand_id,
    item.i_brand,
    SUM(ss_ext_sales_price) as total_sales
FROM 
    date_dim dt,
    store_sales,
    item
WHERE 
    dt.d_date_sk = store_sales.ss_sold_date_sk
    AND store_sales.ss_item_sk = item.i_item_sk
    AND item.i_manufact_id = 128
    AND dt.d_moy = 10
GROUP BY 
    dt.d_year,
    item.i_brand,
    item.i_brand_id
ORDER BY 
    total_sales DESC,
    dt.d_year;
```

### Что означают результаты TPC-DS на практике?

Если OLAP-система показывает высокие результаты в TPC-DS, это говорит о том, что она:
✅ **Эффективно выполняет сложные JOIN** между большими таблицами
✅ **Имеет мощный Cost-Based Optimizer (CBO)** 
✅ **Хорошо масштабируется** на параллельное выполнение многих сложных запросов
✅ **Подходит для сложной корпоративной аналитики**, а не только для простых агрегаций

### Связь с нашей таблицей:

У **StarRocks** и **Doris** стоят ✅ в графе "Работа с большими объединениями (JOIN)" и "Cost-based Optimizer".   
Именно бенчмарк **TPC-DS** является одним из главных публичных доказательств этих заявлений.   
**ClickHouse** исторически фокусировался на других сценариях и лишь недавно начал активно дорабатывать оптимизатор для TPC-DS, что и отражено как "⚠️ (Улучшается)".

**Где посмотреть результаты:**
Официальные результаты публикуются на сайте [tpc.org](http://www.tpc.org/). Многие вендоры и open-source проекты также публикуют свои внутренние тесты в блогах и документации, чтобы продемонстрировать производительность.
