# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ ClickHouse –∏ StarRocks
–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Å—Ö–æ–∂–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è, Sparse Index –∏ Bloom Filter Index –≤ ClickHouse –∏ StarRocks ‚Äî —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∫–∞–∂–¥–æ–π –°–£–ë–î.

### üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –≤ ClickHouse –∏ StarRocks

–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –Ω–∏–∂–µ –Ω–∞–≥–ª—è–¥–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–ª–∏—á–∏—è.

| –ê—Å–ø–µ–∫—Ç | **Sparse Index (ClickHouse)** | **Sparse Index (StarRocks)** | **Bloom Filter Index (ClickHouse)** | **Bloom Filter Index (StarRocks)** |
| :--- | :--- | :--- | :--- | :--- |
| **–û—Å–Ω–æ–≤–Ω–∞—è —Ä–æ–ª—å** | **–ü–µ—Ä–≤–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≥—Ä–∞–Ω—É–ª –¥–∞–Ω–Ω—ã—Ö. | **–ü–µ—Ä–≤–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å (Short Key Index)** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –±–ª–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö –ø–æ –ø—Ä–µ—Ñ–∏–∫—É—Å—É –∫–ª—é—á–∞. | **–í—Ç–æ—Ä–∏—á–Ω—ã–π "–ø—Ä–æ–ø—É—Å–∫–∞—é—â–∏–π" –∏–Ω–¥–µ–∫—Å** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –≤ –Ω–∞–±–æ—Ä–µ –¥–∞–Ω–Ω—ã—Ö. | **–í—Ç–æ—Ä–∏—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ñ–∞–π–ª–µ –¥–∞–Ω–Ω—ã—Ö. |
| **–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã** | –•–µ—à-–æ—Ç–ø–µ—á–∞—Ç–æ–∫ –∏–ª–∏ B-–¥–µ—Ä–µ–≤–æ. –•—Ä–∞–Ω–∏—Ç –∑–∞–ø–∏—Å—å –¥–ª—è –∫–∞–∂–¥–æ–π **–≥—Ä–∞–Ω—É–ª—ã** (–≥—Ä—É–ø–ø—ã —Å—Ç—Ä–æ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, 8192 —Å—Ç—Ä–æ–∫–∏). –î–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É. | –•–µ—à-–æ—Ç–ø–µ—á–∞—Ç–æ–∫. –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å **–∫–∞–∂–¥—ã–µ 1024 —Å—Ç—Ä–æ–∫–∏**, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –ø—Ä–µ—Ñ–∏–∫—Å –∫–ª—é—á–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (–¥–æ 36 –±–∞–π—Ç). –î–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –∫–ª—é—á—É. | **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö** (–±–∏—Ç–æ–≤—ã–π –º–∞—Å—Å–∏–≤ –∏ —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏–∏). –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ **—Ç–æ—á–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** –≤ –±–ª–æ–∫–µ. | **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ **—Ç–æ—á–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** –≤ —Ñ–∞–π–ª–µ –¥–∞–Ω–Ω—ã—Ö (Segment). |
| **–ß—Ç–æ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç** | –í—ã—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞. | –ü—Ä–µ—Ñ–∏–∫—Å —Å—Ç–æ–ª–±—Ü–æ–≤, —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ –∫–ª—é—á–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (DUPLICATE/AGGREGATE/UNIQUE KEY). | –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, **–Ω–µ –≤—Ö–æ–¥—è—â–∏–µ –≤ –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á**. | –û—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã —Å –≤—ã—Å–æ–∫–æ–π –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –∫–ª—é—á–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏. |
| **–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ** | –í—ã—Å–æ–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –ú–∞–ª—ã–π —Ä–∞–∑–º–µ—Ä. | –ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –±–ª–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É –∫–ª—é—á–∞. | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º, –Ω–µ –≤—Ö–æ–¥—è—â–∏–º –≤ –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á, –±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è. | –°–Ω–∏–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ `=` –∏ `IN` –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º —Å –≤—ã—Å–æ–∫–æ–π –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é. |
| **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ / –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** | –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á. | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω **—Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É** –∫–ª—é—á–∞. –ï—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ WHERE –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–æ–ª–±–µ—Ü –Ω–µ –≤ –Ω–∞—á–∞–ª–µ –∫–ª—é—á–∞, –∏–Ω–¥–µ–∫—Å –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç. | **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ª–æ–∂–Ω–æ–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π** (–º–æ–∂–µ—Ç —É–∫–∞–∑–∞—Ç—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç). –¢—Ä–µ–±—É–µ—Ç —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. | **–õ–æ–∂–Ω–æ–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è**. –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ `=` –∏ `IN`. –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–ª—è —Ç–∏–ø–æ–≤ TINYINT, FLOAT, DOUBLE. |

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

-   **–í ClickHouse**: –ù–∞—á–Ω–∏—Ç–µ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ **Sparse Primary Key** –ø–æ–¥ –≤–∞—à–∏ —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã. **Bloom Filter** –¥–æ–±–∞–≤–ª—è–π—Ç–µ –¥–ª—è —Å—Ç–æ–ª–±—Ü–æ–≤ —Å –≤—ã—Å–æ–∫–æ–π –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö `WHERE` –∏ –Ω–µ –≤—Ö–æ–¥—è—Ç –≤ –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á.
-   **–í StarRocks**: –ü—Ä–æ–¥—É–º–∞–π—Ç–µ –ø–æ—Ä—è–¥–æ–∫ —Å—Ç–æ–ª–±—Ü–æ–≤ –≤ –∫–ª—é—á–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, —á—Ç–æ–±—ã —É—Å–ª–æ–≤–∏—è `WHERE` –≤–∞—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ **–ø—Ä–µ—Ñ–∏–∫—Å –∏–Ω–¥–µ–∫—Å–∞ (Short Key Index)**. **Bloom Filter** —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –¥–ª—è —Å—Ç–æ–ª–±—Ü–æ–≤ —Å –≤—ã—Å–æ–∫–æ–π –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é –ø—Ä–µ—Ñ–∏–∫—Å–∞ –∫–ª—é—á–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —É—Å–ª–æ–≤–∏—è—Ö `=` –∏ `IN`.
