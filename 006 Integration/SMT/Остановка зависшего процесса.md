–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ **–ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏ –∑–∞–≤–∏—Å –∏ –Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è**. –î–∞–≤–∞–π—Ç–µ —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–º.

## üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å—à–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

### 1. **–ù–∞–π–¥–µ–º –∏ –∑–∞–≤–µ—Ä—à–∏–º –ø—Ä–æ—Ü–µ—Å—Å PostgreSQL**
```sql
-- –ù–∞–π–¥–µ–º PID –ø—Ä–æ—Ü–µ—Å—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–æ—Ç
SELECT pid, usename, application_name, state 
FROM pg_stat_replication 
WHERE slot_name = 'flink_cdc_demo_slot';

-- –ò–õ–ò –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞–ø—Ä—è–º—É—é –≤ —Å–ª–æ—Ç–∞—Ö
SELECT slot_name, active, active_pid, database 
FROM pg_replication_slots 
WHERE slot_name = 'flink_cdc_demo_slot';
```

### 2. **–ó–∞–≤–µ—Ä—à–∏–º –ø—Ä–æ—Ü–µ—Å—Å**
```sql
-- –ú—è–≥–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
SELECT pg_terminate_backend(2441981);

-- –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
SELECT pg_cancel_backend(2441981);
```

### 3. **–¢–µ–ø–µ—Ä—å —É–¥–∞–ª–∏–º —Å–ª–æ—Ç**
```sql
SELECT pg_drop_replication_slot('flink_cdc_demo_slot');
```

## üîç –ü–æ—á–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–∞–º

**–ü—Ä–∏—á–∏–Ω—ã:**
- Flink JobManager/TaskManager –Ω–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –°–µ—Ç–µ–≤–æ–π —Ä–∞–∑—Ä—ã–≤ –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç
- –û—à–∏–±–∫–∞ –≤ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä–µ, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã
- –ó–∞–¥–∞–Ω–∏–µ Flink —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏

## üéØ –ö–∞–∫ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –≤ –±—É–¥—É—â–µ–º

### 1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è Flink**
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å running jobs
/home/sruser/flink-1.20.3/bin/flink list

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è
/home/sruser/flink-1.20.3/bin/flink stop-all

# –ò–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤–µ—Å—å –∫–ª–∞—Å—Ç–µ—Ä
/home/sruser/flink-1.20.3/bin/stop-cluster.sh
```

### 2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–ª–æ—Ç–æ–≤**
–í –∫–æ–Ω—Ñ–∏–≥–µ SMT –¥–æ–±–∞–≤—å—Ç–µ:
```bash
flink.cdc.debezium.slot.drop.on.stop = true
```

### 3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç–æ–≤**
–£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ:
```bash
rm /home/sruser/smt/result/flink-create.*.sql
java -jar starrocks-migration-tool.jar -c config_prod.conf
```

## üìã –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Flink –∑–∞–¥–∞–Ω–∏—è** ‚Üí 2. **–ó–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã PG** ‚Üí 3. **–£–¥–∞–ª–∏—Ç—å —Å–ª–æ—Ç—ã** ‚Üí 4. **–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥–∏**

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∑–∞–Ω–æ–≤–æ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ —Å–ª–æ—Ç–æ–≤.

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å 2441981 –∏ —É–¥–∞–ª–∏—Ç—å —Å–ª–æ—Ç - —ç—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É.
